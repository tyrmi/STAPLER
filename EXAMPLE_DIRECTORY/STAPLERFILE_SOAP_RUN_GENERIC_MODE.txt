STAPLEFILE

JOB NAME: SOAP_RUN_GENERIC
STARTING POINT DIR: /path/to/EXAMPLE_DIRECTORY/RAW_DATA
PROJECT DIR: /path/to/EXAMPLE_DIRECTORY/SOAP_RUN

RESOURCE MANAGER:
#!/bin/bash -l
#SBATCH --time=1:00:00
#SBATCH --partition=serial
#SBATCH --ntasks=1
#SBATCH --nodes=1
#SBATCH --mem-per-cpu=4000
RESOURCE MANAGER END:

COMMANDS:
ADD/PATH/TO/cutadapt -a AAAGGGCCCTTT -A GGGTTTCCCGGG -o $OUTPUT{$PAIR_1} -p $OUTPUT{$PAIR_1} $PAIR_1 $PAIR_2
ADD/PATH/TO/soap2 -a $READ1 -b $READ2 -o $OUTPUT{$PAIR_1} -2 $OUTPUT{$PAIR_1}.unpaired -D /path/to/EXAMPLE_DIRECTORY/REFERENCE_GENOME/a_lyrata_frigida.fasta
ADD/PATH/TO/Picard_SamFormatConverter INPUT=$INPUT.sam OUTPUT=$OUTPUT.bam
ADD/PATH/TO/stapler_Picard_SortSam INPUT=$INPUT OUTPUT=$OUTPUT SORT_ORDER=coordinate
ADD/PATH/TO/Picard_MarkDuplicates INPUT=$INPUT OUTPUT=$OUTPUT REMOVE_DUPLICATES=true
ADD/PATH/TO/Picard_AddOrReplaceReadGroups INPUT=$INPUT OUTPUT=$OUTPUT RGPL=$VALUE_TABLE:/path/to/EXAMPLE_DIRECTORY/VALUE_TABLE_READ_GROUPS.txt:file_name:RGPL RGLB=$VALUE_TABLE:/path/to/EXAMPLE_DIRECTORY/VALUE_TABLE_READ_GROUPS.txt:file_name:RGLB RGSM=$VALUE_TABLE:/path/to/EXAMPLE_DIRECTORY/VALUE_TABLE_READ_GROUPS.txt:file_name:RGSM RGPU=$VALUE_TABLE:/path/to/EXAMPLE_DIRECTORY/VALUE_TABLE_READ_GROUPS.txt:file_name:RGPU RGID=$VALUE_TABLE:/path/to/EXAMPLE_DIRECTORY/VALUE_TABLE_READ_GROUPS.txt:file_name:RGID
ADD/PATH/TO/samtools_index INPUT=$INPUT
ADD/PATH/TO/bcftools_mpileup -f /path/to/EXAMPLE_DIRECTORY/REFERENCE_GENOME/a_lyrata_frigida.fasta -Ob $ALL_INPUTS.bam > $OUTPUT.bcf
ADD/PATH/TO/bcftools_call -Ov -m $INPUT.bcf > $OUTPUT.vcf
COMMANDS END: